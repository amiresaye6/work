<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Task Scheduler</title>
    <style>
        :root {
            /* Color variables for easy theme adjustments */
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cae;
            --background-color: #f9f9f9;
            --grid-color: #e0e0e0;
            --weekend-color: #f0f5ff;
            --task-color-1: #ffadad;
            --task-color-2: #ffd6a5;
            --task-color-3: #caffbf;
            --task-color-4: #9bf6ff;
            --task-color-5: #bdb2ff;
            --header-color: #333;
            --text-color: #444;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            padding: 20px;
        }

        .scheduler-container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .scheduler-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background-color: var(--primary-color);
            color: white;
        }

        .scheduler-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .week-navigation {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .week-selector {
            font-size: 1rem;
            font-weight: 500;
        }

        .nav-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .nav-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Grid Layout */
        .schedule-grid {
            display: grid;
            grid-template-columns: 60px repeat(7, 1fr);
            overflow-x: auto;
        }

        .time-header, .day-header {
            padding: 10px;
            text-align: center;
            font-weight: 600;
            background-color: var(--secondary-color);
            color: white;
            position: sticky;
            top: 0;
            z-index: 2;
        }

        .time-header {
            grid-column: 1;
            border-right: 1px solid var(--grid-color);
            border-bottom: 1px solid var(--grid-color);
        }

        .day-name {
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .day-date {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .weekend {
            background-color: var(--weekend-color);
        }

        .time-slot {
            border-top: 1px solid var(--grid-color);
            border-right: 1px solid var(--grid-color);
            height: 60px;
            padding: 4px;
            font-size: 0.8rem;
            text-align: center;
            position: relative;
        }

        .time-label {
            grid-column: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid var(--grid-color);
            border-bottom: 1px solid var(--grid-color);
            height: 60px;
            font-size: 0.8rem;
            background-color: #f0f0f0;
        }

        /* Task Styling */
        .task {
            position: absolute;
            left: 2px;
            right: 2px;
            z-index: 1;
            border-radius: 4px;
            padding: 4px 8px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .task-title {
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .task-time {
            font-size: 0.7rem;
            opacity: 0.8;
        }

        /* Hover effect for time slots */
        .time-slot:hover::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%234a6fa5" opacity="0.8"/><path fill="white" d="M50 30a5 5 0 0 0-5 5v10H35a5 5 0 0 0 0 10h10v10a5 5 0 0 0 10 0V55h10a5 5 0 0 0 0-10H55V35a5 5 0 0 0-5-5z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .time-slot:hover:not([data-occupied="true"])::after {
            opacity: 1;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 24px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--header-color);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .button-group {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .btn-cancel {
            background-color: #f2f2f2;
            color: #555;
        }

        .btn-save {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-cancel:hover {
            background-color: #e0e0e0;
        }

        .btn-save:hover {
            background-color: #3c5a85;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .schedule-grid {
                grid-template-columns: 40px repeat(7, minmax(100px, 1fr));
            }

            .day-name {
                font-size: 0.8rem;
            }

            .day-date {
                font-size: 0.7rem;
            }

            .time-slot {
                height: 50px;
            }

            .time-label {
                height: 50px;
            }
        }

        @media (max-width: 480px) {

            .scheduler-container {
                border-radius: 0;
                box-shadow: none;
            }

            .schedule-grid {
                grid-template-columns: 30px repeat(7, minmax(100px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="scheduler-container">
        <div class="scheduler-header">
            <h1 class="scheduler-title">Weekly Task Scheduler</h1>
            <div class="week-navigation">
                <button class="nav-btn" id="prev-week">←</button>
                <div class="week-selector" id="current-week">Apr 01 - Apr 07, 2025</div>
                <button class="nav-btn" id="next-week">→</button>
            </div>
        </div>

        <div class="schedule-grid" id="schedule-grid">
            <!-- Grid headers and content will be generated by JavaScript -->
        </div>
    </div>

    <!-- Task Creation Modal -->
    <div class="modal" id="task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Task</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <form id="task-form">
                <div class="form-group">
                    <label for="task-title">Task Title</label>
                    <input type="text" id="task-title" required>
                </div>
                <div class="form-group">
                    <label for="task-duration">Duration (hours)</label>
                    <select id="task-duration">
                        <option value="1">1 hour</option>
                        <option value="2">2 hours</option>
                        <option value="3">3 hours</option>
                        <option value="4">4 hours</option>
                        <option value="5">5 hours</option>
                        <option value="6">6 hours</option>
                        <option value="7">7 hours</option>
                        <option value="8">8 hours</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="task-color">Color</label>
                    <select id="task-color">
                        <option value="task-color-1">Red</option>
                        <option value="task-color-2">Orange</option>
                        <option value="task-color-3">Green</option>
                        <option value="task-color-4">Blue</option>
                        <option value="task-color-5">Purple</option>
                    </select>
                </div>
                <input type="hidden" id="task-day">
                <input type="hidden" id="task-hour">
                <div class="button-group">
                    <button type="button" class="btn btn-cancel" id="cancel-task">Cancel</button>
                    <button type="submit" class="btn btn-save">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // DOM Elements
        const scheduleGrid = document.getElementById('schedule-grid');
        const prevWeekBtn = document.getElementById('prev-week');
        const nextWeekBtn = document.getElementById('next-week');
        const currentWeekElement = document.getElementById('current-week');
        const taskModal = document.getElementById('task-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const cancelTaskBtn = document.getElementById('cancel-task');
        const taskForm = document.getElementById('task-form');

        // App State
        const state = {
            currentDate: new Date(),
            weekStart: null,
            weekEnd: null,
            tasks: {},
            selectedDay: null,
            selectedHour: null
        };

        // Initialize UI
        function init() {
            updateWeekDates();
            generateGrid();
            loadTasks(); // Would fetch from API in a real application

            // Event Listeners
            prevWeekBtn.addEventListener('click', navigateToPrevWeek);
            nextWeekBtn.addEventListener('click', navigateToNextWeek);
            closeModalBtn.addEventListener('click', closeModal);
            cancelTaskBtn.addEventListener('click', closeModal);
            taskForm.addEventListener('submit', handleTaskFormSubmit);
        }

        // Update current week dates based on state.currentDate
        function updateWeekDates() {
            // Get the first day of the week (Sunday)
            const currentDay = state.currentDate.getDay();
            const diff = state.currentDate.getDate() - currentDay;
            
            state.weekStart = new Date(state.currentDate);
            state.weekStart.setDate(diff);
            
            state.weekEnd = new Date(state.weekStart);
            state.weekEnd.setDate(state.weekStart.getDate() + 6);
            
            // Format dates for display
            const startMonth = state.weekStart.toLocaleString('default', { month: 'short' });
            const endMonth = state.weekEnd.toLocaleString('default', { month: 'short' });
            
            currentWeekElement.textContent = `${startMonth} ${state.weekStart.getDate()} - ${endMonth} ${state.weekEnd.getDate()}, ${state.weekEnd.getFullYear()}`;
        }

        // Generate the schedule grid
        function generateGrid() {
            scheduleGrid.innerHTML = '';
            
            // Add empty top-left corner cell
            const cornerCell = document.createElement('div');
            cornerCell.className = 'time-header';
            scheduleGrid.appendChild(cornerCell);
            
            // Add day headers
            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(state.weekStart);
                dayDate.setDate(state.weekStart.getDate() + i);
                
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                
                // Mark Friday and Saturday as weekend
                if (i === 5 || i === 6) {
                    dayHeader.classList.add('weekend');
                }
                
                const dayName = document.createElement('div');
                dayName.className = 'day-name';
                dayName.textContent = dayDate.toLocaleString('default', { weekday: 'short' });
                
                const dateSpan = document.createElement('div');
                dateSpan.className = 'day-date';
                dateSpan.textContent = `${dayDate.getMonth() + 1}/${dayDate.getDate()}`;
                
                dayHeader.appendChild(dayName);
                dayHeader.appendChild(dateSpan);
                scheduleGrid.appendChild(dayHeader);
            }
            
            // Add time slots (8 AM to 10 PM)
            for (let hour = 8; hour <= 22; hour++) {
                // Add time label
                const timeLabel = document.createElement('div');
                timeLabel.className = 'time-label';
                timeLabel.textContent = formatHour(hour);
                scheduleGrid.appendChild(timeLabel);
                
                // Add time slots for each day
                for (let day = 0; day < 7; day++) {
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.dataset.day = day;
                    timeSlot.dataset.hour = hour;
                    
                    // Mark Friday and Saturday slots with weekend class
                    if (day === 5 || day === 6) {
                        timeSlot.classList.add('weekend');
                    }
                    
                    // Add click event to create new task
                    timeSlot.addEventListener('click', () => openTaskModal(day, hour));
                    
                    scheduleGrid.appendChild(timeSlot);
                }
            }
            
            // Render existing tasks
            renderTasks();
        }

        // Format hour for display (8 AM, 9 AM, etc.)
        function formatHour(hour) {
            if (hour < 12) {
                return `${hour} AM`;
            } else if (hour === 12) {
                return '12 PM';
            } else {
                return `${hour - 12} PM`;
            }
        }

        // Open task creation modal
        function openTaskModal(day, hour) {
            state.selectedDay = day;
            state.selectedHour = hour;
            
            // Set form hidden fields
            document.getElementById('task-day').value = day;
            document.getElementById('task-hour').value = hour;
            
            // Calculate the date for display
            const taskDate = new Date(state.weekStart);
            taskDate.setDate(state.weekStart.getDate() + day);
            
            // Update modal title
            document.querySelector('.modal-title').textContent = `Add Task for ${taskDate.toLocaleDateString('en-US', { weekday: 'long' })} at ${formatHour(hour)}`;
            
            // Show modal
            taskModal.style.display = 'flex';
        }

        // Close task modal
        function closeModal() {
            taskModal.style.display = 'none';
            taskForm.reset();
        }

        // Handle task form submission
        function handleTaskFormSubmit(e) {
            e.preventDefault();
            
            const title = document.getElementById('task-title').value;
            const duration = parseInt(document.getElementById('task-duration').value);
            const color = document.getElementById('task-color').value;
            const day = state.selectedDay;
            const hour = state.selectedHour;
            
            // Create unique task ID
            const taskId = `task-${Date.now()}`;
            
            // Create task object
            const task = {
                id: taskId,
                title,
                day,
                hour,
                duration,
                color
            };
            
            // Save task (would send to API in a real application)
            saveTask(task);
            
            // Close modal
            closeModal();
        }

        // Save task to state and render
        function saveTask(task) {
            // Create week key in format "YYYY-MM-DD" of start date
            const weekKey = state.weekStart.toISOString().split('T')[0];
            
            if (!state.tasks[weekKey]) {
                state.tasks[weekKey] = [];
            }
            
            state.tasks[weekKey].push(task);
            
            // Save to localStorage (substitute for API call)
            localStorage.setItem('scheduler-tasks', JSON.stringify(state.tasks));
            
            // Render the new task
            renderTasks();
        }

        // Load tasks from storage (would be API in real application)
        function loadTasks() {
            const savedTasks = localStorage.getItem('scheduler-tasks');
            if (savedTasks) {
                state.tasks = JSON.parse(savedTasks);
                renderTasks();
            }
        }

        // Render all tasks for the current week
        function renderTasks() {
            // Clear existing tasks from UI
            document.querySelectorAll('.task').forEach(el => el.remove());
            
            // Get tasks for current week
            const weekKey = state.weekStart.toISOString().split('T')[0];
            const weekTasks = state.tasks[weekKey] || [];
            
            // Render each task
            weekTasks.forEach(task => {
                renderTask(task);
            });
        }

        // Render a single task
        function renderTask(task) {
            // Find all affected time slots
            for (let i = 0; i < task.duration; i++) {
                const hour = task.hour + i;
                if (hour > 22) break; // Don't go past 10 PM
                
                const timeSlot = document.querySelector(`.time-slot[data-day="${task.day}"][data-hour="${hour}"]`);
                if (timeSlot) {
                    // Mark slot as occupied
                    timeSlot.dataset.occupied = 'true';
                    
                    // Only create the task element in the first hour slot
                    if (i === 0) {
                        const taskElement = document.createElement('div');
                        taskElement.className = `task ${task.color}`;
                        taskElement.id = task.id;
                        taskElement.style.backgroundColor = `var(--${task.color})`;
                        taskElement.style.top = '2px';
                        taskElement.style.height = `${task.duration * 60 - 4}px`;
                        
                        const taskTitle = document.createElement('div');
                        taskTitle.className = 'task-title';
                        taskTitle.textContent = task.title;
                        
                        const taskTime = document.createElement('div');
                        taskTime.className = 'task-time';
                        taskTime.textContent = `${formatHour(task.hour)} - ${formatHour(task.hour + task.duration)}`;
                        
                        taskElement.appendChild(taskTitle);
                        taskElement.appendChild(taskTime);
                        
                        // Add event listener to edit task (would be implemented in full version)
                        taskElement.addEventListener('click', (e) => {
                            e.stopPropagation(); // Prevent opening a new task
                            // Edit task functionality would be added here
                            alert(`Edit task: ${task.title}`);
                        });
                        
                        timeSlot.appendChild(taskElement);
                    }
                }
            }
        }

        // Navigate to previous week
        function navigateToPrevWeek() {
            state.currentDate.setDate(state.currentDate.getDate() - 7);
            updateWeekDates();
            generateGrid();
        }

        // Navigate to next week
        function navigateToNextWeek() {
            state.currentDate.setDate(state.currentDate.getDate() + 7);
            updateWeekDates();
            generateGrid();
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>